{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"using-vatican-explorer/","title":"Core API","text":"<p>Some hand-written intro explaining the module.</p>"},{"location":"using-vatican-explorer/#functions","title":"Functions","text":""},{"location":"using-vatican-explorer/#search.search_biblical_citation","title":"search_biblical_citation","text":""},{"location":"using-vatican-explorer/#search.search_biblical_citation-functions","title":"Functions","text":""},{"location":"using-vatican-explorer/#search.search_biblical_citation.default_regex_pattern","title":"default_regex_pattern","text":"<pre><code>default_regex_pattern() -&gt; str\n</code></pre> <p>Function to return the default regex pattern for biblical citations.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>The default regex pattern for biblical citations.</p> Source code in <code>src/search/search_biblical_citation.py</code> <pre><code>def default_regex_pattern() -&gt; str:\n\"\"\"Function to return the default regex pattern for biblical citations.\n    Args: \n        None\n    Returns:\n        str: The default regex pattern for biblical citations.\n    \"\"\"\nreturn r'\\b(?:[1-3]\\s+)?[A-Za-z]{2,4}\\s+\\d{1,3}:\\d{1,3}(?:[-.]\\d{1,3})?\\b'\n</code></pre>"},{"location":"using-vatican-explorer/#search.search_biblical_citation.search_biblical_citations","title":"search_biblical_citations","text":"<pre><code>search_biblical_citations(\ntext: str,\ncontext: int = 100,\npattern: str | None = None,\n) -&gt; list[tuple[str, str]]\n</code></pre> <p>Function to search for biblical citations in a given text.</p> <p>Parameters:</p> Name Type Description Default <code>text</code> <code>str</code> <p>The input text to search for biblical citations.</p> required <code>context</code> <code>int</code> <p>The number of characters to include before and after the citation for context.</p> <code>100</code> <code>pattern</code> <code>str | None</code> <p>The regex pattern to use for searching. If None, a default pattern is used.</p> <code>None</code> <p>Returns:</p> Type Description <code>list[tuple[str, str]]</code> <p>list of tuples: Each tuple contains the found citation and its surrounding context.</p> Source code in <code>src/search/search_biblical_citation.py</code> <pre><code>def search_biblical_citations(text: str, context: int=100, pattern: str | None = None) -&gt; list[tuple[str, str]]:\n\"\"\"Function to search for biblical citations in a given text.\n    Args:\n        text: The input text to search for biblical citations.\n        context: The number of characters to include before and after the citation for context.\n        pattern: The regex pattern to use for searching. If None, a default pattern is used.\n    Returns:\n        list of tuples: Each tuple contains the found citation and its surrounding context.\n    \"\"\"\n# Check that the input text is a string\nif not isinstance(text, str):\nraise ValueError(\"Input text must be a string.\")\n# Check that context is an integer\nif not isinstance(context, int):\nraise ValueError(\"Context must be an integer.\")\n# Check that pattern is a string if provided\nif pattern is not None and not isinstance(pattern, str):\nraise ValueError(\"Pattern must be a string.\")\n# Default regex pattern for biblical citations if none provided\nif pattern is None:\npattern = default_regex_pattern()\n# Search for citations using regex\nmatches = finditer(pattern, text)\n# Initialize results list\nresults = []\n# Iterate over matches\nfor match in matches:\n# Extract citation\ncitation = match.group()\n# Get start and end indices of the match\nstart, end = match.span()\n# Calculate context boundaries\ncontext_start = max(0, start - context)\ncontext_end = min(len(text), end + context)\n# Extract context\nsurrounding_text = text[context_start:context_end]\n# Append citation and context to results\nresults.append((citation, surrounding_text))\n# Return results\nreturn results\n</code></pre>"},{"location":"using-vatican-explorer/#search.search_biblical_citation.search_biblical_citations_db","title":"search_biblical_citations_db","text":"<pre><code>search_biblical_citations_db(\npattern: str | None = None, query: str | None = None\n) -&gt; list[tuple[int, list[tuple[str, str]]]]\n</code></pre> <p>Search database texts for biblical citations matching a regex pattern.</p> <p>This function connects to the database, validates the schema, executes a regex-based SQL query, and extracts biblical citations from each row's text content.</p> <p>Parameters:</p> Name Type Description Default <code>pattern</code> <code>str | None</code> <p>Optional regex pattern used when searching within the <code>text_content</code> column. If not provided, the default biblical citation pattern is used via <code>default_regex_pattern()</code>.</p> <code>None</code> <code>query</code> <code>str | None</code> <p>Optional SQL query override. If not provided, a default query is used that searches the <code>text_content</code> column with a REGEXP clause. The query must contain exactly one positional placeholder (?) for the regex pattern. The query must return all columns from the <code>texts</code> table in the same order as the schema.</p> <code>None</code> <p>Returns:</p> Type Description <code>list[tuple[int, list[tuple[str, str]]]]</code> <p>A list of tuples containing the row ID and the extracted citations.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If required tables, columns, or schema definitions are missing or incorrect.</p> Source code in <code>src/search/search_biblical_citation.py</code> <pre><code>def search_biblical_citations_db(\npattern: str | None = None,\nquery: str | None = None\n) -&gt; list[tuple[int, list[tuple[str, str]]]]:\n\"\"\"Search database texts for biblical citations matching a regex pattern.\n    This function connects to the database, validates the schema, executes a\n    regex-based SQL query, and extracts biblical citations from each row's\n    text content.\n    Args:\n        pattern:\n            Optional regex pattern used when searching within the `text_content`\n            column. If not provided, the default biblical citation pattern is\n            used via `default_regex_pattern()`.\n        query:\n            Optional SQL query override. If not provided, a default query is\n            used that searches the `text_content` column with a REGEXP clause.\n            The query must contain exactly one positional placeholder (?) for\n            the regex pattern. The query must return all columns from the `texts`\n            table in the same order as the schema.\n    Returns:\n        A list of tuples containing the row ID and the extracted citations.\n    Raises:\n        ValueError: If required tables, columns, or schema definitions are\n            missing or incorrect.\n    \"\"\"\nconn = None\ncursor = None\ntry:\n# Connect to the database\nconn, cursor = connect_to_database()\n# Register REGEXP function (SQLite compatibility)\nregister_regexp_function(conn)\n# Validate table\nif not table_exists(cursor, \"texts\"):\nraise ValueError(\"The 'texts' table does not exist in the database.\")\n# Validate schema format\nif not check_texts_table_schema(cursor):\nraise ValueError(\"The 'texts' table schema does not match the expected format.\")\n# Default SQL query\ndefault_query = \"\"\"SELECT * FROM texts WHERE text_content REGEXP ?\n        \"\"\"\n# Use default query if none provided\nsql = query or default_query\n# Use default regex pattern if none provided\nif pattern is None:\npattern = default_regex_pattern()\n# Fetch rows matching the regex pattern\nrows = fetch_rows_by_regexp(cursor, sql, pattern)\nresults = []\n# Extract citations from each row's text content\nfor row in rows:\nrow_id = row[0]\ntext_content = row[9] \nif not isinstance(text_content, str):\ncitations = []\nelse:\ncitations = search_biblical_citations(text_content, pattern=pattern)\nresults.append((row_id, citations))\nreturn results\nfinally:\nif conn is not None and hasattr(conn, \"close\"):\nconn.close()\n</code></pre>"}]}